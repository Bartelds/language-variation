<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html40/loose.dtd">
<html>
<head>
  <title>RuG/L04 - Manuals - mapdiff</title>
  <link rel="stylesheet" type="text/css" href="manuals.css">
</head>
<body>

<center>
<H1><a href="http://www.let.rug.nl/~kleiweg/L04/"><img src="RuG-L04.gif" alt="RuG/L04" border="0"></a></H1>
<h2>Manuals</h2>
<h3>mapdiff</h3>
</center>

<h4>Description</h4>

<div class="text">
draw a map of differences between neighbours, such as a composite cluster map,
      a cophenetic map, and others
<p>
the result is an Encapsulated PostScript image
</div>

<h4>Synopsis</h4>

<div class="text">
<b>mapdiff</b>
[<b>-c</b>&nbsp;<em>float</em>]
[<b>-C</b>&nbsp;<em>float</em>]
[<b>-g</b>]
[<b>-l</b>]
[<b>-o</b>&nbsp;<em>filename</em>]
[<b>-r</b>]
<em><a href="mapconfig.html">configfile</a></em> <em><a href="formats.html#dif">differencefile</a></em>
</div>

<h4>Options</h4>

<div class="text">
<dl>
<dt><b>-c</b>
<dd>first <a href="#contrast">contrast</a> parameter, default 1.0<br>
   useful values usually between 0.5 and 5, must be positive
<dt><b>-C</b>
<dd>second <a href="#contrast">contrast</a> parameter, default 0.0<br>
   useful values usually between -0.5 and 0.5, must be less than 1
<dt><b>-g</b>
<dd>use greyscale
<dt><b>-l</b>
<dd>draw links instead of borders
<dt><b>-o</b> <em>filename</em>
<dd>output file
<dt><b>-r</b>
<dd>reverse light/dark
</dl>
</div>

<h4>Purpose</h4>

<div class="text">
This program can be used to draw a map that shows differences between
neighbours. The input file is a <a href="formats.html#dif">difference
matrix file</a>. Using an ordinary set of differences may not be very useful,
since only local differences are shown, and these can be rather arbitrary
in the light of any global structure in the set of differences. 
<p>
A more useful application is to use this program in combination with the
<a href="cluster.html">cluster</a> program, that can translate global structure
to local differences.
<p>
If the difference matrix file also contains negative values, the result
will be a two-way split, shades of blue for negative values,
shades of red for positive values.

</div>

<a name="contrast"></a>
<h4>Contrast</h4>

<div class="text">
With differences D ranging from 0 to MAX, the value is adjusted as follows:
<p>
<center>
   (D / MAX)<sup>EXP</sup> &times; (1 - BASE) + BASE
</center>
<p>
The value of EXP is set by the option -c (lower case).<br>
The value of BASE is set by the option -C (upper case).
<p>
The resulting values fall in the range from 0 (or less, no visible lines) to 1 (darkest lines).
<p>
The graphs below show the effect of different values for both parameters.
Top left is the default. Negative results are set to 0 (see bottom row graphs).
</div>
<p>
<div class="fig">
<img src="mapdiff.gif">
</div>

<h4>Examples</h4>

<div class="text">
Show the top 16 cluster devision using Ward's Method:
<pre class="code">
    cluster -wm -b -m 2-16 difference_file &gt; tmp_file
    mapdiff config_file tmp_file &gt; map.ps
</pre>
<p>
Create a fuzzy cluster map, using Weighted Average:
<pre class="code">
    cluster -wa -b -m 6 -r 50 -N 1 difference_file &gt; tmp_file
    mapdiff config_file tmp_file &gt; map.ps
</pre>
<p>
Create a cophenetic map, using Ward's Method. The factor .3333 for parameter -c
      corrects for the bias of Ward's Method. The value -.3 for parameter -C
      shifts the values a bit so the full range from light to dark lines is
      available:
<pre class="code">
    cluster -wm -c ftr.dif &gt; tmp_file
    mapdiff -c .3333 -C -.3 config_file tmp_file &gt; map.ps
</pre>
<p>
The program <a href="cluster.html">cluster</a> can process only one difference
	table file, and use only one cluster method on that file.
But you can use the program
<a href="difsum.html">difsum</a> to combine multiple clusterings. Here is an
	example:
<pre class="code">
    cluster -ga -b -m 12 -r 50 -N 1 difference_file &gt; tmp_file1
    cluster -wa -b -m  6 -r 50 -N 1 difference_file &gt; tmp_file2
    difsum tmp_file1 tmp_file2 &gt; tmp_file
    mapdiff config_file tmp_file &gt; map.ps
</pre>
</div>


</BODY>
</HTML>
